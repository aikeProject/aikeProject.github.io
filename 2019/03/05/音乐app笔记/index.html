<!DOCTYPE HTML><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta http-equiv="Cache-Control" content="no-siteapp"><meta http-equiv="Cache-Control" content="no-transform"><meta name="renderer" content="webkit|ie-comp|ie-stand"><meta name="apple-mobile-web-app-capable" content="成雨的个人博客"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="browsermode" content="application"><meta name="screen-orientation" content="portrait"><link rel="dns-prefetch" href="http://blog.rensailong.top"><meta name="keywords" content="前端,react"><meta name="description" content="项目地址github自定义react官方脚手架(create-react-app)
使用rewire模块
1yarn add rewire proxyquire --dev

配置方法

新建s..."><meta name="robots" content="all"><meta name="google" content="all"><meta name="googlebot" content="all"><meta name="verify" content="all"><title>音乐app笔记 | 成雨的个人博客</title><link rel="alternate" href="/atom.xml" title="成雨的个人博客" type="application/atom+xml"><link rel="icon" href="/favicon-20190220051001892.ico"><link rel="stylesheet" href="/css/bootstrap.min.css?rev=0ee553ffb8c61021be4ac517c25c07b5"><link rel="stylesheet" href="/css/font-awesome.min.css?rev=afecc2c74d492b747ec32ef68e9d06ec"><link rel="stylesheet" href="/css/style.css?rev=20c56e3d4978a648b6298e44bd3ae711"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?ccd98c2d3b145ffad4c50be87f40400b";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><meta name="baidu-site-verification" content="Ic3zHIPe6C"><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script></head></html><!--[if lte IE 8]><style>
    html{ font-size: 1em }
</style><![endif]--><!--[if lte IE 9]><div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div><![endif]--><body><header class="main-header" style="background-image:url(/./img/my-banner.jpg)"><div class="main-header-box"><a class="header-avatar" href="/" title="成雨"><img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block"></a><div class="branding"><h2>你若化成风，我便化成雨</h2></div></div></header><nav class="main-navigation"><div class="container"><div class="row"><div class="col-sm-12"><div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav"><span class="sr-only"></span><i class="fa fa-bars"></i></span> <a class="navbar-brand" href="http://blog.rensailong.top">成雨的个人博客</a></div><div class="collapse navbar-collapse" id="main-menu"><ul class="menu"><li role="presentation" class="text-center"><a href="/"><i class="fa"></i> 首页</a></li><li role="presentation" class="text-center"><a href="/categories/前端/"><i class="fa"></i> 前端</a></li><li role="presentation" class="text-center"><a href="/categories/后端/"><i class="fa"></i> 后端</a></li><li role="presentation" class="text-center"><a href="/categories/工具/"><i class="fa"></i> 工具</a></li><li role="presentation" class="text-center"><a href="/archives/"><i class="fa"></i> 时间轴</a></li></ul></div></div></div></div></nav><section class="content-wrap"><div class="container"><div class="row"><main class="col-md-8 main-content m-post"><p id="process"></p><article class="post"><div class="post-head"><h1 id="音乐app笔记">音乐app笔记</h1><div class="post-meta"><span class="categories-meta fa-wrap"><i class="fa fa-folder-open-o"></i> <a class="category-link" href="/categories/前端/">前端</a></span><span class="fa-wrap"><i class="fa fa-tags"></i> <span class="tags-meta"><a class="tag-link" href="/tags/react/">react</a> <a class="tag-link" href="/tags/前端/">前端</a></span></span><span class="fa-wrap"><i class="fa fa-clock-o"></i> <span class="date-meta">2019/03/05</span></span><span class="fa-wrap"><i class="fa fa-eye"></i><span id="busuanzi_value_page_pv"></span></span></div></div><div class="post-body post-content"><h4 id="项目地址"><a href="#项目地址" class="headerlink" title="项目地址"></a><a href="http://musict.rensailong.top/" target="_blank" rel="noopener">项目地址</a></h4><h4 id="github"><a href="#github" class="headerlink" title="github"></a><a href="https://github.com/aikeProject/react-music/" target="_blank" rel="noopener">github</a></h4><h4 id="自定义react官方脚手架-create-react-app"><a href="#自定义react官方脚手架-create-react-app" class="headerlink" title="自定义react官方脚手架(create-react-app)"></a>自定义react官方脚手架(create-react-app)</h4><ul><li><p>使用rewire模块</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add rewire proxyquire --dev</span><br></pre></td></tr></table></figure></li><li><p>配置方法</p><ul><li>新建<code>scripts</code>文件夹</li><li><p>在<code>scripts</code>下新建<code>customized-build.js</code>文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  本模块运行react-scripts里的脚本 (Create React App)</span></span><br><span class="line"><span class="comment">  可以自定义webpack配置，通过在项目根目录创建"overrides-config.dev.js" 、 "overrides-config.prod.js" 文件.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  A config-overrides file should export a single function that takes a</span></span><br><span class="line"><span class="comment">  config and modifies it as necessary.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  module.exports = function(webpackConfig) &#123;</span></span><br><span class="line"><span class="comment">    webpackConfig.module.rules[0].use[0].options.useEslintrc = true;</span></span><br><span class="line"><span class="comment">  &#125;;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> rewire = <span class="built_in">require</span>(<span class="string">'rewire'</span>);</span><br><span class="line"><span class="keyword">var</span> proxyquire = <span class="built_in">require</span>(<span class="string">'proxyquire'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span>(process.argv[<span class="number">2</span>]) &#123;</span><br><span class="line">  <span class="comment">// The "start" script is run during development mode</span></span><br><span class="line">  <span class="keyword">case</span> <span class="string">'start'</span>:</span><br><span class="line">    rewireModule(<span class="string">'react-scripts/scripts/start.js'</span>, loadCustomizer(<span class="string">'./overrides-config.dev'</span>));</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="comment">// The "build" script is run to produce a production bundle</span></span><br><span class="line">  <span class="keyword">case</span> <span class="string">'build'</span>:</span><br><span class="line">    rewireModule(<span class="string">'react-scripts/scripts/build.js'</span>, loadCustomizer(<span class="string">'./overrides-config.prod'</span>));</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="comment">// The "test" script runs all the tests with Jest</span></span><br><span class="line">  <span class="keyword">case</span> <span class="string">'test'</span>:</span><br><span class="line">    <span class="comment">// Load customizations from the config-overrides.testing file.</span></span><br><span class="line">    <span class="comment">// That file should export a single function that takes a config and returns a config</span></span><br><span class="line">    <span class="keyword">let</span> customizer = loadCustomizer(<span class="string">'./overrides-config.testing'</span>);</span><br><span class="line">    proxyquire(<span class="string">'react-scripts/scripts/test.js'</span>, &#123;</span><br><span class="line">      <span class="comment">// When test.js asks for '../utils/createJestConfig' it will get this instead:</span></span><br><span class="line">      <span class="string">'../utils/createJestConfig'</span>: <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// Use the existing createJestConfig function to create a config, then pass</span></span><br><span class="line">        <span class="comment">// it through the customizer</span></span><br><span class="line">        <span class="keyword">var</span> createJestConfig = <span class="built_in">require</span>(<span class="string">'react-scripts/utils/createJestConfig'</span>);</span><br><span class="line">        <span class="keyword">return</span> customizer(createJestConfig(...args));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'customized-build only supports "start", "build", and "test" options.'</span>);</span><br><span class="line">    process.exit(<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Attempt to load the given module and return null if it fails.</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadCustomizer</span>(<span class="params">module</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">require</span>(<span class="built_in">module</span>);</span><br><span class="line">  &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">    <span class="keyword">if</span>(e.code !== <span class="string">"MODULE_NOT_FOUND"</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> e;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// If the module doesn't exist, return a</span></span><br><span class="line">  <span class="comment">// noop that simply returns the config it's given.</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="params">config</span> =&gt;</span> config;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">rewireModule</span>(<span class="params">modulePath, customizer</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Load the module with `rewire`, which allows modifying the</span></span><br><span class="line">  <span class="comment">// script's internal variables.</span></span><br><span class="line">  <span class="keyword">let</span> defaults = rewire(modulePath);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Reach into the module, grab its global 'config' variable,</span></span><br><span class="line">  <span class="comment">// and pass it through the customizer function.</span></span><br><span class="line">  <span class="comment">// The customizer should *mutate* the config object, because</span></span><br><span class="line">  <span class="comment">// react-scripts imports the config as a `const` and we can't</span></span><br><span class="line">  <span class="comment">// modify that reference.</span></span><br><span class="line">  <span class="keyword">let</span> config = defaults.__get__(<span class="string">'config'</span>);</span><br><span class="line">  customizer(config);</span><br></pre></td></tr></table></figure></li><li><p>配置css预处理语言<code>stylus</code></p><ul><li>安装<code>yarn add stylus stylus-loader --dev</code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">config</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Use your ESLint</span></span><br><span class="line">    <span class="comment">/*let eslintLoader = config.module.rules[0];</span></span><br><span class="line"><span class="comment">    eslintLoader.use[0].options.useEslintrc = true;*/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Add the stylus loader second-to-last</span></span><br><span class="line">    <span class="comment">// (last one must remain as the "file-loader")</span></span><br><span class="line">    <span class="keyword">let</span> loaderList = config.module.rules[<span class="number">1</span>].oneOf;</span><br><span class="line">    loaderList.splice(loaderList.length - <span class="number">1</span>, <span class="number">0</span>, &#123;</span><br><span class="line">        test: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">        use: [<span class="string">"style-loader"</span>, <span class="string">"css-loader"</span>, <span class="string">"stylus-loader"</span>]</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>新建 <code>overrides-config.prod.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> paths = <span class="built_in">require</span>(<span class="string">'react-scripts/config/paths'</span>);</span><br><span class="line"><span class="keyword">const</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">'extract-text-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Webpack uses `publicPath` to determine where the app is being served from.</span></span><br><span class="line"><span class="comment">// It requires a trailing slash, or the file assets will get an incorrect path.</span></span><br><span class="line"><span class="keyword">const</span> publicPath = paths.servedPath;</span><br><span class="line"><span class="comment">// Some apps do not use client-side routing with pushState.</span></span><br><span class="line"><span class="comment">// For these, "homepage" can be set to "." to enable relative asset paths.</span></span><br><span class="line"><span class="keyword">const</span> shouldUseRelativeAssetPaths = publicPath === <span class="string">'./'</span>;</span><br><span class="line"><span class="keyword">const</span> cssFilename = <span class="string">'static/css/[name].[contenthash:8].css'</span>;</span><br><span class="line"><span class="keyword">const</span> extractTextPluginOptions = shouldUseRelativeAssetPaths</span><br><span class="line">    ? <span class="comment">// Making sure that the publicPath goes back to to build folder.</span></span><br><span class="line">    &#123; <span class="attr">publicPath</span>: <span class="built_in">Array</span>(cssFilename.split(<span class="string">'/'</span>).length).join(<span class="string">'../'</span>) &#125;</span><br><span class="line">    : &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">config</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Use your ESLint</span></span><br><span class="line">    <span class="comment">/*let eslintLoader = config.module.rules[0];</span></span><br><span class="line"><span class="comment">    eslintLoader.use[0].options.useEslintrc = true;*/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Add the stylus loader second-to-last</span></span><br><span class="line">    <span class="comment">// (last one must remain as the "file-loader")</span></span><br><span class="line">    <span class="keyword">let</span> loaderList = config.module.rules[<span class="number">1</span>].oneOf;</span><br><span class="line">    loaderList.splice(loaderList.length - <span class="number">1</span>, <span class="number">0</span>, &#123;</span><br><span class="line">        test: <span class="regexp">/\.styl$/</span>,</span><br><span class="line">        loader: ExtractTextPlugin.extract(</span><br><span class="line">            <span class="built_in">Object</span>.assign(</span><br><span class="line">                &#123;</span><br><span class="line">                    fallback: &#123;</span><br><span class="line">                        loader: <span class="built_in">require</span>.resolve(<span class="string">'style-loader'</span>),</span><br><span class="line">                        options: &#123;</span><br><span class="line">                            hmr: <span class="literal">false</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    use: [</span><br><span class="line">                        &#123;</span><br><span class="line">                            loader: <span class="built_in">require</span>.resolve(<span class="string">'css-loader'</span>),</span><br><span class="line">                            options: &#123;</span><br><span class="line">                                importLoaders: <span class="number">1</span>,</span><br><span class="line">                                minimize: <span class="literal">true</span>,</span><br><span class="line">                                sourceMap: <span class="literal">true</span></span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;,</span><br><span class="line">                        &#123;</span><br><span class="line">                            loader: <span class="built_in">require</span>.resolve(<span class="string">'stylus-loader'</span>)</span><br><span class="line">                        &#125;</span><br><span class="line">                    ]</span><br><span class="line">                &#125;</span><br><span class="line">            ), extractTextPluginOptions)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p>修改启动脚本</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">    "start": "node scripts/customized-build start",</span><br><span class="line">    "build": "node scripts/customized-build build",</span><br><span class="line">    "test": "react-scripts test --env=jsdom",</span><br><span class="line">    "eject": "react-scripts eject"</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li><li><p>加入<code>autoprefixer</code></p><ul><li>安装<code>yarn add poststylus --dev</code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 新建overrides-config.base.js配置文件，增加poststylus插件配置</span></span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"><span class="keyword">const</span> poststylus = <span class="built_in">require</span>(<span class="string">'poststylus'</span>);</span><br><span class="line"><span class="keyword">const</span> autoprefixer = <span class="built_in">require</span>(<span class="string">'autoprefixer'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports.stylusLoaderOptionsPlugin = <span class="keyword">new</span> webpack.LoaderOptionsPlugin(&#123;</span><br><span class="line">    options: &#123;</span><br><span class="line">      stylus: &#123;</span><br><span class="line">        use: [</span><br><span class="line">          poststylus([ </span><br><span class="line">            <span class="built_in">require</span>(<span class="string">'postcss-flexbugs-fixes'</span>),</span><br><span class="line">            autoprefixer(&#123;</span><br><span class="line">              browsers: [</span><br><span class="line">                <span class="string">'&gt;1%'</span>,</span><br><span class="line">                <span class="string">'last 4 versions'</span>,</span><br><span class="line">                <span class="string">'Firefox ESR'</span>,</span><br><span class="line">                <span class="string">'not ie &lt; 9'</span>, <span class="comment">// React doesn't support IE8 anyway</span></span><br><span class="line">              ],</span><br><span class="line">              flexbox: <span class="string">'no-2009'</span>,</span><br><span class="line">            &#125;)</span><br><span class="line">          ])</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></li></ul></li><li><p>项目配置根路径别名</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// overrides-config.base.js 文件中增加这样的代码</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line">.....</span><br><span class="line">.....</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">resolve</span> (<span class="params">dir</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> path.join(__dirname, <span class="string">'..'</span>, dir)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports.rootPath = resolve(<span class="string">'src'</span>);</span><br></pre></td></tr></table></figure></li></ul></li><li><p>QQ音乐接口</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* 轮播接口</span><br><span class="line">    https://c.y.qq.com/musichall/fcgi-bin/fcg_yqqhomepagerecommend.fcg?</span><br><span class="line">    g_tk=964895631&amp;uin=1121352970&amp;format=json&amp;inCharset=utf-8&amp;</span><br><span class="line">    outCharset=utf-8&amp;notice=0&amp;platform=h5&amp;needNewCode=1&amp;_=1516501673247</span><br><span class="line">* 音乐列表接口</span><br><span class="line">https://u.y.qq.com/cgi-bin/musicu.fcg?</span><br><span class="line">    callback=getUCGI10455592910292011&amp;g_tk=964895631&amp;jsonpCallback=getUCGI10455592910292011&amp;loginUin=1121352970&amp;hostUin=0&amp;</span><br><span class="line">    format=jsonp&amp;inCharset=utf8&amp;outCharset=utf-8&amp;notice=0&amp;platform=yqq&amp;needNewCode=0&amp;</span><br><span class="line">    data=%7B%22albumlib%22%3A%7B%22method%22%3A%22get_album_by_tags%22%2C%22param%22%3A%7B%22area%22%3A7%2C%22company%22%3A-1%2C%22genre%22%3A-1%2C%22type%22%3A-1%2C%22year%22%3A-1%2C%22sort%22%3A2%2C%22get_tags%22%3A1%2C%22sin%22%3A0%2C%22num%22%3A20%2C%22click_albumid%22%3A0%7D%2C%22module%22%3A%22music.web_album_library%22%7D%7D</span><br></pre></td></tr></table></figure></li></ul><hr><ul><li>JSONP使用<ul><li>安装 <code>yarn add jsonp</code></li></ul></li></ul><hr><ul><li>轮播插件 swiper<ul><li>安装 <code>npm install swiper@3.4.2 --save</code></li><li><a href="www.swiper.com.cn">官网</a></li></ul></li></ul><hr><ul><li>滑屏 Better-Scroll<ul><li>安装 <code>npm install better-scroll@1.5.5 --save</code></li><li><a href="https://github.com/ustbhuangyi/better-scroll" target="_blank" rel="noopener">github地址</a></li></ul></li></ul><hr><ul><li>优化图片加载<ul><li>图片懒加载</li><li>使用<code>react-lazyload</code> ， 地址 <a href="https://github.com/jasonslyvia/react-lazyload" target="_blank" rel="noopener">github</a></li><li>安装 <code>npm install react-lazyload --save</code></li></ul></li></ul><hr><ul><li>实现动画 react-transition-group 动画库<ul><li><a href="https://reactcommunity.org/react-transition-group/" target="_blank" rel="noopener">详情</a><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// CSSTransition接受in、timeout、classNames三个props。</span></span><br><span class="line"><span class="comment">// 其中in控制组件的状态。</span></span><br><span class="line"><span class="comment">// 当in为true时，组件的子元素会应用translate-enter、translate-enter-active样式，当in为false时，</span></span><br><span class="line"><span class="comment">// 组件的子元素会应用translate-exit、translate-exit-active样式。timeout指定过渡时间</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><hr><h3 id="学习到的东西"><a href="#学习到的东西" class="headerlink" title="学习到的东西"></a>学习到的东西</h3><hr><pre><code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> e.stopPropagation() <span class="comment">// 阻止事件冒泡</span></span><br><span class="line"><span class="number">2.</span> e.preventDefault()  <span class="comment">// 禁用浏览器默认行为</span></span><br><span class="line"><span class="number">3.</span> <span class="keyword">return</span> <span class="literal">false</span> 相当于 <span class="number">1</span>和<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="number">4.</span> style计算属性</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取css属性值</span></span><br><span class="line"><span class="comment">     * @param oElement 节点</span></span><br><span class="line"><span class="comment">     * @param sName 属性名</span></span><br><span class="line"><span class="comment">     * @returns &#123;*&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getStyle</span>(<span class="params">oElement, sName</span>)</span>&#123;</span><br><span class="line">        <span class="comment">// currentStyle ie</span></span><br><span class="line">        <span class="comment">// getComputedStyle 其它</span></span><br><span class="line">        <span class="keyword">return</span> oElement.currentStyle ? oElement.currentStyle[sName] : getComputedStyle(oElement, <span class="literal">null</span>)[sName];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="number">5.</span> rem</span><br><span class="line">    (<span class="function"><span class="keyword">function</span> (<span class="params">doc, win</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> docEl = doc.documentElement,</span><br><span class="line">            resizeEvt = <span class="string">'orientationchange'</span> <span class="keyword">in</span> <span class="built_in">window</span> ? <span class="string">'orientationchange'</span> : <span class="string">'resize'</span>,</span><br><span class="line">            recalc = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">var</span> clientWidth = docEl.clientWidth;</span><br><span class="line">                <span class="keyword">if</span> (!clientWidth) <span class="keyword">return</span>;</span><br><span class="line">                <span class="keyword">if</span>(clientWidth&gt;=<span class="number">750</span>)&#123;</span><br><span class="line">                    docEl.style.fontSize = <span class="string">'100px'</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    docEl.style.fontSize = <span class="number">100</span> * (clientWidth / <span class="number">750</span>) + <span class="string">'px'</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">        <span class="keyword">if</span> (!doc.addEventListener) <span class="keyword">return</span>;</span><br><span class="line">        win.addEventListener(resizeEvt, recalc, <span class="literal">false</span>);</span><br><span class="line">        doc.addEventListener(<span class="string">'DOMContentLoaded'</span>, recalc, <span class="literal">false</span>);</span><br><span class="line">    &#125;)(<span class="built_in">document</span>, <span class="built_in">window</span>);</span><br><span class="line"><span class="number">7.</span> 使用rem后，获取元素宽度高度的问题？</span><br><span class="line"><span class="comment">// html font-size: 50px;</span></span><br><span class="line">&lt;style&gt;</span><br><span class="line">    #wrapper&#123; width: 2rem; height: 2rem; background-color: aqua;font-size: 20px;&#125;</span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br><span class="line"><span class="regexp">&lt;div id="wrapper" style="width: 2rem;"&gt;</span></span><br><span class="line"><span class="regexp">    demo</span></span><br><span class="line"><span class="regexp">&lt;/</span>div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="comment">// 实际元素宽度应该是 100px, 但是却是32px</span></span><br><span class="line">    <span class="keyword">var</span> wrapperDom = <span class="built_in">document</span>.querySelector(<span class="string">'#wrapper'</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(wrapperDom.offsetWidth); <span class="comment">// 32 </span></span><br><span class="line">    <span class="built_in">console</span>.log(getStyle(wrapperDom, <span class="string">'width'</span>)); <span class="comment">//32px</span></span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">6. class类模型的使用</span></span><br><span class="line"><span class="regexp">   class Song &#123;</span></span><br><span class="line"><span class="regexp">       constructor(id, mId, name, img, duration, url, singer) &#123;</span></span><br><span class="line"><span class="regexp">           this.id = id;</span></span><br><span class="line"><span class="regexp">           this.mId = mId;</span></span><br><span class="line"><span class="regexp">           this.name = name;</span></span><br><span class="line"><span class="regexp">           this.img = img;</span></span><br><span class="line"><span class="regexp">           this.duration = duration;</span></span><br><span class="line"><span class="regexp">           this.url = url;</span></span><br><span class="line"><span class="regexp">           this.singer = singer</span></span><br><span class="line"><span class="regexp">       &#125;</span></span><br><span class="line"><span class="regexp">   &#125;</span></span><br><span class="line"><span class="regexp">7. jsonp</span></span><br><span class="line"><span class="regexp">使用 jsonp(url, option, callback);</span></span><br><span class="line"><span class="regexp">option -&gt; &#123; param: 'callback', name: '给后台的回调名称', prefix: 'name相同，后面回家数字'&#125;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ url = ...?param=name</span></span><br><span class="line"><span class="regexp">ajax请求受同源策略影响，不允许进行跨域请求，</span></span><br><span class="line"><span class="regexp">而script标签src属性中的链接却可以访问跨域的js脚本，</span></span><br><span class="line"><span class="regexp">利用这个特性，服务端不再返回JSON格式的数据，</span></span><br><span class="line"><span class="regexp">而是返回一段调用某个函数的js代码，</span></span><br><span class="line"><span class="regexp">在src中进行了调用，这样实现了跨域   </span></span><br><span class="line"><span class="regexp">8. 深浅拷贝</span></span><br><span class="line"><span class="regexp">var cloneObj = function(obj)&#123;</span></span><br><span class="line"><span class="regexp">    var str, newobj = obj.constructor === Array ? [] : &#123;&#125;;</span></span><br><span class="line"><span class="regexp">    if(typeof obj !== 'object')&#123;</span></span><br><span class="line"><span class="regexp">        return;</span></span><br><span class="line"><span class="regexp">    &#125; else if(window.JSON)&#123; /</span><span class="regexp">/ JSON解析</span></span><br><span class="line"><span class="regexp">        str = JSON.stringify(obj), /</span><span class="regexp">/系列化对象</span></span><br><span class="line"><span class="regexp">        newobj = JSON.parse(str); /</span><span class="regexp">/还原</span></span><br><span class="line"><span class="regexp">    &#125; else &#123;</span></span><br><span class="line"><span class="regexp">        for(var i in obj)&#123; /</span><span class="regexp">/ 递归解析？</span></span><br><span class="line"><span class="regexp">            newobj[i] = typeof obj[i] === 'object' ? </span></span><br><span class="line"><span class="regexp">            cloneObj(obj[i]) : obj[i]; </span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">    return newobj;</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">ES6 浅拷贝</span></span><br><span class="line"><span class="regexp">Object.assign() 方法可以把任意多个的源对象所拥有的自身可枚举属性拷贝给目标对象，然后返回目标对象.</span></span><br><span class="line"><span class="regexp">浅：Object.assign(&#123;&#125;, obj) /</span><span class="regexp">/ 只拷贝自身和可枚举属性</span></span><br></pre></td></tr></table></figure></code></pre><hr></div><div class="post-footer"><div>转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="//github.com/aikeProject" target="_blank">Snippet</a></div><div></div></div></article><div class="article-nav prev-next-wrap clearfix"><a href="/2019/03/05/使用serve部署网站/" class="pre-post btn btn-default" title="使用serve部署网站"><i class="fa fa-angle-left fa-fw"></i> <span class="hidden-lg">上一篇</span> <span class="hidden-xs">使用serve部署网站</span></a> <a href="/2019/02/22/travis-cli/" class="next-post btn btn-default" title="travis-cli"><span class="hidden-lg">下一篇</span> <span class="hidden-xs">travis-cli</span><i class="fa fa-angle-right fa-fw"></i></a></div><div id="comments"><div id="vcomments" class="valine"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="/assets/valine.min.js"></script><script>new Valine({av:AV,el:"#vcomments",appId:"4fxhv6ljJpn9Ri1OJgXCMQCH-gzGzoHsz",appKey:"ef2FdLkY74Ypgpu6k9FDcGep",placeholder:"畅所欲言",notify:!1,verify:!1,avatar:"mm",meta:"nick,mail".split(","),pageSize:"10",path:window.location.pathname,lang:"zh-CN".toLowerCase()})</script></div></main><aside id="article-toc" role="navigation" class="col-md-4"><div class="widget"><h3 class="title">文章目录</h3><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#项目地址"><span class="toc-text">项目地址</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#github"><span class="toc-text">github</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#自定义react官方脚手架-create-react-app"><span class="toc-text">自定义react官方脚手架(create-react-app)</span></a></li></ol><li class="toc-item toc-level-3"><a class="toc-link" href="#学习到的东西"><span class="toc-text">学习到的东西</span></a></li></div></aside></div></div></section><footer class="main-footer"><div class="container"><div class="row"></div></div></footer><a id="back-to-top" class="icon-btn hide"><i class="fa fa-chevron-up"></i></a><div class="copyright"><div class="container"><div class="row"><div class="col-sm-12"><div class="busuanzi">访问量:<strong id="busuanzi_value_site_pv"><i class="fa fa-spinner fa-spin"></i></strong> &nbsp; | &nbsp; 访客数:<strong id="busuanzi_value_site_uv"><i class="fa fa-spinner fa-spin"></i></strong></div></div><div class="col-sm-12"><span>Copyright &copy; 2017</span> | <span>Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a></span> | <span>Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a></span></div></div></div></div><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/js/app.js?rev=586c04b4e85931a49156b4ee90d1d3b6"></script></body>